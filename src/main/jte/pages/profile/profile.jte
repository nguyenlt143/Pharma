@param vn.edu.fpt.pharma.dto.user.ProfileVM profile
@param vn.edu.fpt.pharma.dto.user.ProfileUpdateRequest profileUpdateRequest
@param String success = null
@param String error = null
@param String displayFullName
@param String displayEmail
@param String displayPhone

@template.layouts.layout_test(
headContent = @`<link rel="stylesheet" href="/assets/css/profile/profile.css">`,
content = @`
    <div class="content-wrapper">
        <!-- Page Header -->
        <header class="page-header">
            <h1 class="page-title">H·ªì s∆° Nh√¢n vi√™n</h1>
        </header>

        <!-- Alert Messages -->
        @if(success != null)
            <div class="alert alert-success" role="alert">
                ${success}
            </div>
        @endif
        @if(error != null)
            <div class="alert alert-danger" role="alert">
                ${error}
            </div>
        @endif

        <!-- Content Grid -->
        <div class="content-grid">
                <!-- Left Column - Profile Card -->
                <div class="left-column">
                    <!-- Profile Card -->
                    <div class="profile-card">
                        <div class="profile-avatar-section">
                            <div class="profile-avatar">
                                @if(profile.avatarUrl() != null && !profile.avatarUrl().isEmpty())
                                    <img src="${profile.avatarUrl()}"
                                         alt="Profile Avatar"
                                         class="avatar-image"
                                         id="avatarPreview">
                                @else
                                    <img src="https://static.codia.ai/image/2025-10-28/Ot4EUiUOos.png"
                                         alt="Profile Avatar"
                                         class="avatar-image"
                                         id="avatarPreview">
                                @endif
                            </div>
                            <div class="profile-info">
                                <h2 class="profile-name">${profile.fullName()}</h2>
                                <div class="avatar-upload-wrapper">
                                    <label for="avatarUpload" class="avatar-upload-btn">
                                        üì∑ Thay ƒë·ªïi ·∫£nh
                                    </label>
                                    <input type="file"
                                           id="avatarUpload"
                                           accept="image/jpeg,image/png,image/jpg,image/gif"
                                           style="display: none;">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Basic Info Card -->
                    <div class="info-card">
                        <h3 class="card-title">Th√¥ng tin c∆° b·∫£n</h3>
                        <div class="info-list">
                            <div class="info-row">
                                <div class="info-label">Ch·ª©c v·ª•</div>
                                <div class="info-value">${profile.role()}</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Email</div>
                                <div class="info-value">${profile.email()}</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">S·ªë ƒëi·ªán tho·∫°i</div>
                                <div class="info-value">${profile.phone()}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Edit Form -->
                <div class="right-column">
                    <div class="form-card">
                        <!-- Tab Navigation -->
                        <div class="tab-navigation">
                            <button class="tab-button active">Ch·ªânh s·ª≠a th√¥ng tin</button>
                        </div>

                        <!-- Form Content -->
                        <div class="form-content">
                            <form class="edit-form" id="editForm" action="/pharmacist/profile/update" method="post">
                                <!-- Hidden field for avatar (base64 compressed) -->
                                <input type="hidden" id="avatarData" name="avatarData">

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="fullName" class="form-label">
                                            H·ªç v√† T√™n <span class="required">*</span>
                                        </label>
                                        <input type="text"
                                               id="fullName"
                                               name="fullName"
                                               class="form-input"
                                               value="${displayFullName}"
                                               required
                                               maxlength="100">
                                        <div class="invalid-feedback" id="fullName-error"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="email" class="form-label">
                                            Email <span class="required">*</span>
                                        </label>
                                        <input type="email"
                                               id="email"
                                               name="email"
                                               class="form-input"
                                               value="${displayEmail}"
                                               required
                                               maxlength="100">
                                        <div class="invalid-feedback" id="email-error"></div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="phone" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                                        <input type="tel"
                                               id="phone"
                                               name="phone"
                                               class="form-input"
                                               value="${displayPhone}"
                                               pattern="^(0|\+84)[0-9]{9,10}$"
                                               title="S·ªë ƒëi·ªán tho·∫°i ph·∫£i b·∫Øt ƒë·∫ßu b·∫±ng 0 ho·∫∑c +84 v√† c√≥ 10-11 ch·ªØ s·ªë">
                                        <div class="invalid-feedback" id="phone-error"></div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="currentPassword" class="form-label">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
                                        <input type="password"
                                               id="currentPassword"
                                               name="currentPassword"
                                               class="form-input"
                                               placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i ƒë·ªÉ ƒë·ªïi m·∫≠t kh·∫©u">
                                        <div class="invalid-feedback" id="currentPassword-error"></div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="password" class="form-label">M·∫≠t kh·∫©u m·ªõi</label>
                                        <input type="password"
                                               id="password"
                                               name="password"
                                               class="form-input"
                                               placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng mu·ªën ƒë·ªïi"
                                               minlength="6"
                                               maxlength="30">
                                        <div class="invalid-feedback" id="password-error"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="confirmPassword" class="form-label">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u</label>
                                        <input type="password"
                                               id="confirmPassword"
                                               name="confirmPassword"
                                               class="form-input"
                                               placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi">
                                        <div class="invalid-feedback" id="confirmPassword-error"></div>
                                    </div>
                                </div>

                                <!-- Form Actions -->
                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary" onclick="window.location.reload()">H·ªßy</button>
                                    <button type="submit" class="btn btn-primary">L∆∞u thay ƒë·ªïi</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
`,
pageScript = @`
<script src="/assets/js/profile/profile.js"></script>
`
)

